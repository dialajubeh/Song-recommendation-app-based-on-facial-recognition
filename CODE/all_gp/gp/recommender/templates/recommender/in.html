<!DOCTYPE html>
<html style="font-size: 16px;">
<style>
    #video {
        border: 1px solid black;
        width: 320px;
        height: 240px;
        margin-left: 280px;
        margin-top: 100px;
    }

    #photo {
        border: 1px solid black;
        width: 320px;
        height: 240px;
        margin-left: 210px;
        margin-top: 10px;
    }

    #canvas {
        display: none;
    }

    .camera {
        width: 340px;
        display: inline-block;
    }

    .output {
        width: 320px;
        display: inline-block;

    }


    #startbutton {
        display: block;
        position: relative;
        margin-left: auto;
        margin-right: auto;
        bottom: 36px;
        padding: 5px;
        background-color: #6a67ce;
        border: 1px solid rgba(255, 255, 255, 0.7);
        font-size: 14px;
        color: rgba(255, 255, 255, 1.0);
        cursor: pointer;
    }

    .contentarea {
        font-size: 16px;
        font-family: Arial;
        text-align: center;
    }
    .center {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 200px;
}

    </style>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Profile">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>profile</title>
    <link rel="stylesheet" href="/static/nicepage.css" media="screen">
<link rel="stylesheet" href="/static/in.css" media="screen">
    <script class="u-script" type="text/javascript" src="/static/jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="/static/nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 3.15.3, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i">
    
    

    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "home",
		"url": "index.html"
}</script>
    <meta property="og:title" content="in">
    <meta property="og:type" content="website">
    <meta name="theme-color" content="#478ac9">
    <link rel="canonical" href="index.html">
    <meta property="og:url" content="index.html">
  </head>
  <body class="u-body">
    <section class="u-align-center u-clearfix u-gradient u-section-1" id="carousel_1254">
      <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <div class="u-align-left u-black u-container-style u-group u-group-1">
          <div class="u-container-layout u-container-layout-1">
            <div class="u-gradient u-shape u-shape-circle u-shape-1"></div>
            <h1 class="u-text u-text-body-alt-color u-text-1">Take a selfie, and enjoy</h1>
          </div>
        </div>
      </div>
    </section>
    <section class="u-align-left u-clearfix u-custom-color-2 u-section-2" id="carousel_7914">
      <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <div class="u-absolute-hcenter u-expanded-height u-palette-2-light-3 u-shape u-shape-rectangle u-shape-1"></div>
        <div class="u-shape u-shape-svg u-text-custom-color-2 u-shape-2">
          <svg class="u-svg-link" preserveAspectRatio="none" viewBox="0 0 160 160" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-3b0e"></use></svg>
          <svg class="u-svg-content" viewBox="0 0 160 160" x="0px" y="0px" id="svg-3b0e"><path d="M160,0v160H0V0H160z"></path></svg>
        </div>
        <div class="u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1">
          <div class="u-layout">
            <div class="u-layout-row">
              <div class="u-container-style u-layout-cell u-size-30 u-layout-cell-1">
                <div class="u-container-layout u-container-layout-1">
                  <form method="post" enctype="multipart/form-data" action="predictImage">
                   {% csrf_token %}
                    <div class="contentarea">
                        <div class="camera">
                            <video id="video">Video stream not available.</video>
                        </div>
                         <button id="startbutton" href="https://nicepage.com/c/shapes-website-templates" class="u-btn u-button-style u-gradient u-none u-text-body-alt-color u-btn-1">Take a selfie</button>
                         </div>
                <div class="u-container-style u-layout-cell u-size-30 u-layout-cell-2">
                <div class="u-container-layout u-container-layout-2">
                <canvas id="canvas"></canvas>
                <div class="output" style="margin-left :150px; margin-top:20px;">
                    <img id="photo" alt="The screen capture will appear in this box.">
                </div>
             <input class="u-btn u-button-style u-gradient u-none u-text-body-alt-color u-btn-2" type="submit" value="Submit" >
                </div>
                 <input type="hidden" id="captured_image" class="u-block"  name="captured_image">
                 </div>
                 </form>
              </div>
            </div>
          </div>
        </div>
      </div>
        </div>
    </section>
    <section class="u-align-left u-clearfix u-palette-1-light-3 u-section-3" id="carousel_e5d9">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h2 class="u-text u-text-default u-text-1">Your emotion is detected:{{predicted_emotion}}</h2>
       <div>
    <form method="post" enctype="multipart/form-data" action="song">
      {% csrf_token %}
            <div class="center">
          <button type="submit" class="btn btn-success btn-lg mt-1">Your song is ready play it </button>
        </div>
    </form>
    <hr>
    </div>
      </div>
    </section>
    
    
    <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-8ee1"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">&nbsp;Contact us&nbsp;<br>moodshot21@gmail.com
        </p>
      </div></footer>
    <section class="u-backlink u-clearfix u-grey-80">
      <a class="u-link" href="https://nicepage.com/html-templates" target="_blank">
        <span>HTML Template</span>
      </a>
      <p class="u-text">
        <span>created with</span>
      </p>
      <a class="u-link" href="https://nicepage.com/html-website-builder" target="_blank">
        <span>HTML Builder</span>
      </a>. 
    </section>
    <script>
    /* JS comes here */
    (function() {

        var width = 320; // We will scale the photo width to this
        var height = 0; // This will be computed based on the input stream

        var streaming = false;

        var video = null;
        var canvas = null;
        var photo = null;
        var captured_image = null;
        var startbutton = null;

        function startup() {
            video = document.getElementById('video');
            canvas = document.getElementById('canvas');
            photo = document.getElementById('photo');
            startbutton = document.getElementById('startbutton');

            navigator.mediaDevices.getUserMedia({
                    video: true,
                    audio: false
                })
                .then(function(stream) {
                    video.srcObject = stream;
                    video.play();
                })
                .catch(function(err) {
                    console.log("An error occurred: " + err);
                });

            video.addEventListener('canplay', function(ev) {
                if (!streaming) {
                    height = video.videoHeight / (video.videoWidth / width);

                    if (isNaN(height)) {
                        height = width / (4 / 3);
                    }

                    video.setAttribute('width', width);
                    video.setAttribute('height', height);
                    canvas.setAttribute('width', width);
                    canvas.setAttribute('height', height);
                    streaming = true;
                }
            }, false);

            startbutton.addEventListener('click', function(ev) {
                takepicture();
                ev.preventDefault();
            }, false);

            clearphoto();
        }


        function clearphoto() {
            var context = canvas.getContext('2d');
            context.fillStyle = "#AAA";
            context.fillRect(0, 0, canvas.width, canvas.height);

            var data = canvas.toDataURL('image/png');
            photo.setAttribute('src', data);
        }

        function takepicture() {
            var context = canvas.getContext('2d');
            if (width && height) {
                canvas.width = width;
                canvas.height = height;
                context.drawImage(video, 0, 0, width, height);

                var data = canvas.toDataURL('image/png');
                photo.setAttribute('src', data);
                document.getElementById('captured_image').value = canvas.toDataURL('image/png');
            } else {
                clearphoto();
            }
        }
        window.addEventListener('load', startup, false);
    })();
    </script>
  </body>
</html>